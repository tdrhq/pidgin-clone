%define name       @PACKAGE@
%define version    @VERSION@
%define release    1
%define serial     1
%define prefix     /usr
%define sysconfdir /etc

Summary:	A client compatible with AOL's 'Instant Messenger'
Name:		%{name}
Version:	%{version}
Release:	%{release}
Serial:		%{serial}
Copyright:	GPL
Group:		Applications/Internet
Vendor:		Pimpin' Penguins
Url:		http://www.marko.net/gaim/
Source:		%{name}-%{version}.tar.gz
BuildRoot:	/var/tmp/%{name}-%{version}-root
Requires:	gtk+ >= 1.2.3

%description
Gaim allows you to talk to anyone using AOL's 
Instant Messenger service (you can sign up at http://www.aim.aol.com).  

It uses the TOC version of the AOL protocol, so your buddy list is 
stored on AOL's servers and can be retrieved from anywhere.

It contains many of the same features as AOL's IM client while at
the same time incorporating many new features.

%package applet
Summary:	A Gnome client compatible with AOL's 'Instant Messenger'
Group:		Applications/Internet
Requires:	gtk+ >= 1.2.3

%description applet
Gaim allows you to talk to anyone using AOL's 
Instant Messenger service (you can sign up at http://www.aim.aol.com).  

It uses the TOC version of the AOL protocol, so your buddy list is 
stored on AOL's servers and can be retrieved from anywhere.

It contains many of the same features as AOL's IM client while at
the same time incorporating many new features.

The applet sits in your Gnome panel. It has all the same functionality
as the regular application but takes less desktop space.

%prep
%setup

%build
CFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=%{prefix} --disable-gnome
make
if [ -d $RPM_BUILD_ROOT ]; then rm -r $RPM_BUILD_ROOT; fi;
mkdir -p $RPM_BUILD_ROOT%{prefix}
make prefix=$RPM_BUILD_ROOT%{prefix} install-strip
make distclean
CFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=${prefix} --sysconfdir=${sysconfdir} --enable-distrib
make

%install
make prefix=$RPM_BUILD_ROOT%{prefix} sysconfdir=$RPM_BUILD_ROOT%{sysconfdir} install-strip

%files
%defattr(-,root,root)
%{prefix}/bin/gaim
%doc doc/the_penguin.txt doc/PROTOCOL doc/CREDITS NEWS COPYING AUTHORS doc/FAQ README README.plugins ChangeLog
%attr(755,root,root) %{prefix}/lib/gaim/*
%{prefix}/share/locale/*/*/*
%{prefix}/share/pixmaps/gaim.xpm
%{prefix}/share/gnome/apps/Internet/gaim.desktop


%files applet
%defattr(-,root,root)
%attr(755,root,root) %{prefix}/bin/gaim_applet
%doc doc/the_penguin.txt doc/PROTOCOL doc/CREDITS NEWS COPYING AUTHORS doc/FAQ README README.plugins ChangeLog
%{prefix}/lib/gaim/*
%{prefix}/share/locale/*/*/*
%{prefix}/share/sounds/gaim/*
%{prefix}/share/pixmaps/gaim.xpm
%{prefix}/share/gnome/apps/Internet/gaim.desktop
%{sysconfdir}/CORBA/servers/*
%{prefix}/share/applets/Network/*
%{sysconfdir}/sound/events/*

%clean
rm -r $RPM_BUILD_ROOT
